
.include "m328Pdef.inc"  ;

.org 0x00
rjmp RESET  ;

RESET:
    ; Configurar todos los pines del puerto B como salida
    ldi r16, 0b11111111   ;
    out DDRB, r16   ;

main_loop:
    ; Encender LEDs en pares desde los extremos hacia el centro
    ldi r16, 0b00011000   ;
    out PORTD, r16
    rcall delay_long  ; Esperar un poco para visualizar el cambio

    ldi r16, 0b00000000   ;
    out PORTD, r16
    rcall delay_long   ;

    ldi r16, 0b00011000   ; Encender LEDs en PB0, PB7, PB1, PB6, PB2 y PB5
    out PORTD, r16
    rcall delay_long   ;

    ldi r16, 0b00000000   ;
    out PORTD, r16
    rcall delay_long   ;

    ; Apagar LEDs en el mismo orden de afuera hacia adentro
    ldi r16, 0b00000000   ; Encender todos los LEDs
    out PORTD, r16
    rcall delay_long   ;

    ldi r16, 0b00011000   ;
    out PORTD, r16
    rcall delay_long  ;

    ldi r16, 0b00111100   ;
    out PORTD, r16
    rcall delay_long   ;

    ldi r16, 0b01111110   ;
    out PORTD, r16
    rcall delay_long  ;

    ;
    ldi r16, 0b11111111   ;
    out PORTD, r16
rcall delay_long
    rjmp main_loop  ;

;
delay_loop:
    dec r20         ; Decrementar r20
    brne delay_loop ; Repetir hasta que r20 sea 0
    dec r19         ; Decrementar r19
    brne delay_loop ; Repetir hasta que r19 sea 0
    dec r18         ; Decrementar r18
    brne delay_loop ; Repetir hasta que r18 sea 0
    ret             ; Regresar de la rutina

